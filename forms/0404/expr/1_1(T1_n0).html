<!doctype html>
<html>

<head>
    <title>Debate Pairwise Comparison</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/css/bootstrap.min.css"
        integrity="sha384-VCmXjywReHh4PwowAiWNagnWcLhlEJLA5buUprzK8rxFgeH0kww/aWY76TfkUoSX" crossorigin="anonymous">
    <link rel="stylesheet" href="/debate-evaluation/assets/css/base.css">
    
</head>

<body>
    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            
    <div class="container">
        <h1 class="text-center mb-4">Debate Output Comparison</h1>
        <hr class="my-4">

        <div class="mb-4">
            <p class="lead">You'll be comparing two different debate outputs side by side. Please evaluate both versions and provide ratings for each.</p>
        </div>

        <div class="mb-4">
            <h4>What to Expect:</h4>
            <ul class="list-group">
                <li class="list-group-item">Listen to a debate divided into Opening (4 min per side), Rebuttal (4 min per side), and Closing stages (2 min per side).</li>
                <li class="list-group-item">Share your initial opinion before listening.</li>
                <li class="list-group-item">Evaluate how each side performs during the debate.</li>
                <li class="list-group-item">Cast your final vote after listening.</li>
                <li class="list-group-item">The process will take about 1 hours and a $30 Amazon Gift Card will be sent as a gift for your participation.</li>
            </ul>
        </div>

        <div class="mb-4">
            <h4>How to Vote:</h4>
            <ul class="list-group">
                <li class="list-group-item"><strong>Support "For" Side</strong> - If you agree with the motion</li>
                <li class="list-group-item"><strong>Support "Against" Side</strong> - If you disagree with the motion</li>
                <li class="list-group-item"><strong>Choose "Tie"</strong> - If you do not have a preference</li>
            </ul>
        </div>

        <div class="mb-4">
            <h4>Rating Guide:</h4>
            <div class="card-group">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Poor (1)</h5>
                        <p class="card-text" style="font-size: 16px;">Limited evidence with poor organization or fundamental logic flaws. Disengage with no audience awareness.</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Weak (2)</h5>
                        <p class="card-text" style="font-size: 16px;">Reasonable statements with at least one noticeable weakness.</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Moderate (3)</h5>
                        <p class="card-text" style="font-size: 16px;">Reasonable statements, which provide on-topic evidence with logical flow and balanced emotional tone.</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Strong (4)</h5>
                        <p class="card-text" style="font-size: 16px;">Reasonable statements with at least one impressive shining point.</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Compelling (5)</h5>
                        <p class="card-text" style="font-size: 16px;">Powerful evidence with effective counterpoints and deep audience connection.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

        </div>
    </div>

    


    <div class="container" id="form_container">
        <form id="theForm" action="https://script.google.com/macros/s/AKfycby4yVMejSjiW8bSUyODIY8lvW6Sf-UWqudpjHpQULUfFSqTvOsVIshdepIndj3vbOJq0w/exec" method="POST" onsubmit="return preventRepeatedSubmission() && checkAllRadioGroupsChecked() && confirmSubmission() && addTimestamp();;">
        <input type="hidden" name="timestamp" id="timestamp">
            <div class="form-group">
                <label for="name">Name / Prolific ID (for Prolific Participants) <sup>*</sup>  </label>
                <input class="form-control" type="text" inputmode="text" name="name" required>
            </div>
            <div class="form-group">
                <label for="mail">Email / Prolific Email (for Prolific Participants) <sup>*</sup> </label>
                <input class="form-control" type="text" inputmode="email" placeholder="account@example.com" name="mail" required>
            </div>
            <small class="form-text text-muted">* indicate required question</small>

            <br>
            <div id="motion" name="motion"><h4>Motion: Processed Foods Should Play A Larger Role In Sustainable Food Systems </h4></div>
            <br>
            
            
    <input type="hidden" id="mode" name="mode" value="mixed">
    <input type="hidden" id="version" name="version" value="0404">

    
        <div class="card form-group question" id="question_1">
            <div class="card-header"><b>Question 1: Pre-Vote Stage</b></div>
            <div class="card-body">
                

                <!-- Overall Comparison Question -->
                
                <div class="form-group">
                    <label for="q1" style="font-weight: bold; font-size: 1.1em;">
                        Please choose your attitude towards the given motion before the debate begins.<sup>*</sup>
                    </label>
                    <div class="row align-items-center">
                        <div class="col-10 offset-1">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" id="q1_against_2" name="q1" value="-2">
                                <label class="form-check-label" for="q1_against">Highly Against</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" id="q1_against_1" name="q1" value="-1">
                                <label class="form-check-label" for="q1_tie">Slightly Against</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" id="q1_tie" name="q1" value="0">
                                <label class="form-check-label" for="q1_tie">Neutral</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" id="q1_for_1" name="q1" value="1">
                                <label class="form-check-label" for="q1_tie">Slightly Support</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" id="q1_for_2" name="q1" value="2">
                                <label class="form-check-label" for="q1_for">Highly Support</label>
                            </div>
                        </div>
                    </div>
                
                </div>
                
            
            </div>
            <div class="card-footer">
                <b>End of Pre-Vote Stage Comparison</b>
            </div>
        </div>
    
        <div class="card form-group question" id="question_2">
            <div class="card-header"><b>Question 2: Opening Stage</b></div>
            <div class="card-body">
                
                    <div class="side-container">
                    
                        <div class="row">
                            <!-- Left Side (Output A) -->
                            <div class="col-6 border-right">
                                <!-- Audio Player -->
                                
                                <h5 class="text-center mb-3">Output A - <strong>For</strong> Side</h5>
                                    <div class="audio-section mb-4">
                                        <div class="audio-player mb-3">
                                            <audio controls src="https://debaterecords.s3.amazonaws.com/audio_0404/case1_1/opening_for_a.mp3" class="w-100" id="audio_a_1_For">
                                                Your browser does not support the audio element.
                                            </audio>
                                        </div>

                                        <!-- Transcript -->
                                        <details class="transcript-details mb-3">
                                            <summary class="transcript-summary p-2 bg-light rounded">
                                                <i class="fas fa-file-alt mr-2"></i>
                                                (Optional) <strong>For</strong> - Transcript A
                                            </summary>
                                            <div class="transcript-content p-3 bg-white border rounded mt-2">In this debate we argue that processed foods should play a larger role in sustainable food systems defined as food systems that deliver food security and nutrition for all in such a way that the economic social and environmental bases to generate food security and nutrition for future generations are not compromised. We define processed foods as foods altered from their natural state for preservation convenience or enhanced nutritional value our judging criterion is maximizing resource efficiency and minimizing environmental impact. The judge should prioritize the side that demonstrates the greatest improvement in resource utilization and the most significant reduction in environmental consequences within the food system. First processed foods reduce food waste throughout the supply chain. Processing techniques such as canning freezing and drying extend shelf life and prevent spoilage significantly reducing food waste from farm to table for example preserving foods through processing ensures food safety and prolongs their shelf life so we throw away less food. Studies show that approximately 1/3 of food produced globally for human consumption is lost or wasted each year. By increasing the role of processed foods which have longer shelf lives we can drastically reduce this waste and conserve the resources used in food production. The sustainable nutrition initiative indicates that processed foods reduce food waste and contribute to equitable food distribution. Less food waste directly translates to more efficient resource use bolstering environmental sustainability. Second processed foods enhanced food security and affordability particularly in urban areas. Processing allows for wider distribution and preservation of nutrients making food more accessible and affordable. Especially in areas with limited access to fresh produce. Research indicates that food processing can help mitigate nutrition insecurity and overcome the environmental challenges of nourishing the global population sustainably. As populations become increasingly urbanized the ability to provide affordable shelf-stable food becomes even more critical processed foods often cost less than their fresh counterparts due to economies of scale and reduced transportation costs. This affordability is crucial for ensuring that low-income communities have access to nutritious food thereby supporting food security in an equitable and sustainable manner. Third innovation in food processing promote sustainable practices modern food processing utilizes advanced technologies to optimize resource use reduce energy consumption. And minimize environmental impact. Key methods involve mild heat microwaves and pulsed electric fields to enhance food quality and sustainability. These innovations aim to enhance food quality and sustainability. These advancements are creating a new generation of processed foods that are not only convenient and affordable but also environmentally responsible. For instance life cycle assessments are used to measure the environmental impact of processed foods highlighting areas for improvement in waste and emissions. By continually innovating in food processing we can reduce the environmental footprint and make a significant contribution to sustainable food systems. In conclusion by reducing food waste enhancing food security and fostering innovation in sustainable practices processed foods are essential for building resilient and sustainable food systems that can feed a growing global population while minimizing environmental impact.<br><br>**Reference**<br>(1) Sustainable Nutrition Initiative. "The Role of Processed Foods in a Sustainable Food System." [https://sustainablenutritioninitiative.com/the-role-of-processed-foods-in-a-sustainable-food-system/](https://sustainablenutritioninitiative.com/the-role-of-processed-foods-in-a-sustainable-food-system/)<br>(2) Nature. "Plant-based alternatives (PBAs) are processed foods that mimic animal-sourced foods, supporting transitions towards more plant-based diets" [https://www.nature.com/articles/s41467-024-45328-6](https://www.nature.com/articles/s41467-024-45328-6)<br>(3) PMC. "Food processing, which is an essential element of food systems around the world, has the potential to help mitigate nutrition insecurity and overcome the environmental challenges of nourishing the global population sustainably." [https://pmc.ncbi.nlm.nih.gov/articles/PMC6410904/](https://pmc.ncbi.nlm.nih.gov/articles/PMC6410904/)<br>(4) WBCSD. "Processed food and its role in nutritious and sustainable diets" [https://www.wbcsd.org/resources/processed-food-and-its-role-in-nutritious-and-sustainable-diets/](https://www.wbcsd.org/resources/processed-food-and-its-role-in-nutritious-and-sustainable-diets/)<br>(5) ResearchGate. "IoT Harvest Innovations in Sustainable Food Processing" [https://www.researchgate.net/publication/381434131_IoT_Harvest_Innovations_in_Sustainable_Food_Processing](https://www.researchgate.net/publication/381434131_IoT_Harvest_Innovations_in_Sustainable_Food_Processing)<br>(6) UCD. "Innovations in sustainable food processing and preservation" [https://www.ucd.ie/modules/BSEN40730](https://www.ucd.ie/modules/BSEN40730)<br>(7) Frontiers in Nutrition. "The role of food processing in feeding a growing population sustainably" [https://www.frontiersin.org/journals/nutrition/articles/10.3389/fnut.2020.00034/full](https://www.frontiersin.org/journals/nutrition/articles/10.3389/fnut.2020.00034/full)<br>(8) Routes Journal. "Feeding a growing population sustainably requires changes to the global food system, including the production of food" [https://routesjournal.org/2022/12/20/r2134/](https://routesjournal.org/2022/12/20/r2134/)<br>(9) [https://sustainablenutritioninitiative.com/the-role-of-processed-foods-in-a-sustainable-food-system/](https://sustainablenutritioninitiative.com/the-role-of-processed-foods-in-a-sustainable-food-system/)
                                            </div>
                                        </details>

                                        <!-- Rating Section -->
                                        <div class="form-group">
                                        <label for="q2_1_a">
                                            How persuasive is <strong>Output A</strong> in supporting <strong>For</strong> side? Rate the performance based on the following principle. <sup>*</sup>
                                        </label>
                                        <div class="row align-items-center">
                                            <div class="col-10 offset-1">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="q2_1_a_poor" name="q2_1_a" value="1">
                                                    <label class="form-check-label" for="q2_1_a_poor">
                                                        <strong>Poor</strong>: Limited evidence with poor organization or fundamental logic flaws. Disengage with no audience awareness. 
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="q2_1_a_weak" name="q2_1_a" value="2">
                                                    <label class="form-check-label" for="q2_1_a_weak">
                                                        <strong>Weak</strong>: Reasonable statements with at least one noticeable weakness. 
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="q2_1_a_moderate" name="q2_1_a" value="3">
                                                    <label class="form-check-label" for="q2_1_a_moderate">
                                                        <strong>Moderate</strong>: Reasonable statements, which provide on-topic evidence with logical flow and balanced emotional tone showing basic audience awareness
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="q2_1_a_strong" name="q2_1_a" value="4">
                                                    <label class="form-check-label" for="q2_1_a_strong">
                                                        <strong>Strong</strong>: Reasonable statements with at least one impressive shining points. 
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="q2_1_a_compelling" name="q2_1_a" value="5">
                                                    <label class="form-check-label" for="q2_1_a_compelling">
                                                        <strong>Compelling</strong>: Powerful evidence with effective counterpoints and create deep connection with audience.
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Comment Section -->
                                    <div class="form-group mt-3 mb-4">
                                        <label for="q2_1_comment_a"> (Optional) Additional comments for <strong> Output A's For </strong> side:</label>
                                        <textarea class="form-control" id="q2_1_comment_a" name="q2_1_comment_a" rows="2"></textarea>
                                    </div>
                                    </div>
                                    
                                
                            </div>

                            <!-- Right Side (Output B) -->
                            <div class="col-6">
                                <!-- Audio Player -->
                                <h5 class="text-center mb-3">Output B - <strong>For</strong> Side </h5>
                                    <div class="audio-section mb-4">
                                        <div class="audio-player mb-3">
                                            <audio controls src="https://debaterecords.s3.amazonaws.com/audio_0404/case1_1/opening_for_b.mp3" class="w-100" id="audio_b_1_For">
                                                Your browser does not support the audio element.
                                            </audio>
                                        </div>

                                        <!-- Transcript -->
                                        <details class="transcript-details mb-3">
                                            <summary class="transcript-summary p-2 bg-light rounded">
                                                <i class="fas fa-file-alt mr-2"></i>
                                                (Optional) <strong>For</strong> Transcript B
                                            </summary>
                                            <div class="transcript-content p-3 bg-white border rounded mt-2">Good morning, everyone. We stand for the proposition that selectively processed foods should play a larger role in sustainable food systems. To ensure clarity, let's define our terms. By "processed foods," we are referring to foods that have undergone specific treatments altering their raw state to enhance preservation, safety, or convenience, and, crucially, with optimized nutrient profiles. It is important to emphasize that we are talking about *selectively* processed foods, and not minimally processed or ultra-processed options, which are not included in this discussion. By "sustainable food systems," we mean food production and distribution methods that minimize environmental impact, ensure food security, and promote equitable access to nutritious food.<br><br>Our criterion for judging this debate is straightforward: which side demonstrably promotes greater food security and environmental stewardship? We contend that *selectively* processed foods, when strategically integrated, are a powerful tool for achieving these goals.<br><br>First, *these specifically processed foods* with optimized nutrient profiles can directly address malnutrition, particularly in food deserts. Fortified processed foods offer a practical and readily available solution to deliver essential nutrients to underserved populations where access to fresh produce is limited by scarcity or affordability. The Better Health Channel  notes that the nutrient value of food is almost always altered by processing. Therefore, *selectively* processed foods can be optimized to deliver nutrients to vulnerable populations.<br><br>Second, *selectively* processed, shelf-stable foods significantly reduce food waste by extending product lifecycles. RethinkWaste  suggests that shelf-stable foods can help reduce food waste as they last longer. *Selectively* processed foods designed for extended shelf life minimize spoilage throughout the supply chain, from farm to table, contributing to substantial overall waste reduction.<br><br>Finally, precision fermentation, a key component of *selectively* processed food production, offers resource-efficient protein alternatives. Instead of relying on traditional animal agriculture, which demands vast amounts of land and water, precision fermentation allows us to "brew" proteins using microorganisms. Imagine brewing beer, but instead of alcohol, we're brewing protein. This process requires significantly less land and water, making it a far more sustainable option for meeting the growing global demand for protein. In fact, North America dominated the precision fermentation market with a revenue share of 40.52% in 2023, due to increasing consumer awareness and the growing demand for sustainable and eco-friendly products . According to The Hartman Group, around 40% of U.S. adults, over 90 million individuals, are projected to embrace products, with an estimated reach of 132 million consumers .<br><br>In conclusion, we firmly believe that *selectively* processed foods are not the antithesis of sustainable food systems. Instead, when intelligently produced and strategically deployed, they represent a crucial ally in our collective effort to feed the world more equitably and sustainably. We urge you to consider the potential of these technologies to address malnutrition, reduce waste, and create a more resource-efficient future for food. Thank you.<br><br>**Reference**<br>[1] Food processing and nutrition | Better Health Channel. Better Health Channel. <br>[2] 9 Ways to Reduce Your Food Waste – RethinkWaste. RethinkWaste.<br>[3] Precision Fermentation Market Size & Trends - Grand View Research. Grand View Research.
                                            </div>
                                        </details>

                                        <!-- Rating Section -->
                                        <div class="form-group">
                                        <label for="q2_1_b">
                                            How persuasive is <strong>Output B</strong> in supporting <strong>For</strong> side? Rate the performance based on the following principle. <sup>*</sup>
                                        </label>
                                        <div class="row align-items-center">
                                            <div class="col-10 offset-1">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="q2_1_b_poor" name="q2_1_b" value="1">
                                                    <label class="form-check-label" for="q2_1_b_poor">
                                                        <strong>Poor</strong>: Limited evidence with poor organization or fundamental logic flaws. Disengage with no audience awareness. 
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="q2_1_b_weak" name="q2_1_b" value="2">
                                                    <label class="form-check-label" for="q2_1_b_weak">
                                                        <strong>Weak</strong>: Reasonable statements with at least one noticeable weaknesses. 
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="q2_1_b_moderate" name="q2_1_b" value="3">
                                                    <label class="form-check-label" for="q2_1_b_moderate">
                                                        <strong>Moderate</strong>: Reasonable statements, which provide on-topic evidence with logical flow and balanced emotional tone showing basic audience awareness
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="q2_1_b_strong" name="q2_1_b" value="4">
                                                    <label class="form-check-label" for="q2_1_b_strong">
                                                        <strong>Strong</strong>: Reasonable statements with at least one impressive shining points. 
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" id="q2_1_b_compelling" name="q2_1_b" value="5">
                                                    <label class="form-check-label" for="q2_1_b_compelling">
                                                        <strong>Compelling</strong>: Powerful evidence with effective counterpoints and create deep connection with audience.
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Comment Section -->
                                    <div class="form-group mt-3 mb-4">
                                        <label for="q2_1_comment_b"> (Optional) Additional comments for <strong> Output B's For </strong> side:</label>
                                        <textarea class="form-control" id="q2_1_comment_b" name="q2_1_comment_b" rows="2"></textarea>
                                    </div>
                                    </div>
                                    
                            </div>
                        </div>

                        <div class="row">
                            <div class="form-group">
                                <label for="q2" style="font-weight: bold; font-size: 1.1em;" class="col-12 offset-4">
                                    Which output do you find more effective overall?<sup>*</sup>
                                </label>
                                <div class="row justify-content-center">
                                    <div class="col-12 offset-8">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="q2_1" value="-1" id="q2_1_slightly_a">
                                            <label class="form-check-label" for="q2_1_a"> Prefer Output A</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="q2_1" value="0" id="q2_1_equal">
                                            <label class="form-check-label" for="q2_1_equal">Both outputs are equally effective</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="q2_1" value="1" id="q2_1_slightly_b">
                                            <label class="form-check-label" for="q2_1_b">Prefer Output B</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    
                    </div>

                   
                    
                    <hr class="my-4">
                

                <!-- Overall Comparison Question -->
                
            
            </div>
            <div class="card-footer">
                <b>End of Opening Stage Comparison</b>
            </div>
        </div>
    

    <!-- Additional Questions -->
    
        <div class="card form-group question" id="question_3">
            <div class="card-header">
                <b>(Optional) Question 5: Which factors were most crucial in your assessment?</b>
            </div>
            <div class="card-body">
                
                    <div class="form-group">
                        <label for="q5"></label>
                        <textarea class="form-control" name="q5" rows="3"></textarea>
                    </div>
                
            </div>
            <div class="card-footer">
                <b>Additional Question 1 / 2</b>
            </div>
        </div>
    
        <div class="card form-group question" id="question_4">
            <div class="card-header">
                <b>(Optional) Question 6: How long did you spend on this evaluation?</b>
            </div>
            <div class="card-body">
                
                    <div class="form-group">
                        <label for="q6"></label>
                        <textarea class="form-control" name="q6" rows="3"></textarea>
                    </div>
                
            </div>
            <div class="card-footer">
                <b>Additional Question 2 / 2</b>
            </div>
        </div>
    

    <button id="previousPageButton" class="btn btn-secondary btn-lg" type="button">Previous Question</button>
    <button id="nextPageButton" class="btn btn-primary btn-lg" type="button">Next Question</button>

            <input type="text" name="formid" value="1_1(T1_n0)" hidden>
            <input type="text" name="thank" value="Thanks" hidden>
            <input class="btn btn-info btn-lg" type="submit" value="Submit Results" id="submitBtn">
            <p class="text-muted">
                <small>If you find that you can't submit the results, please check back to see if you have filled in your name and if you have answered every required question with <sup>*</sup>. Thank you.</small>
            </p>
        </form>
    </div>

    <div class="container" style="padding-top: 60px;">
        <p class="text-center text-muted">&copy; CMU Debate Team</p>
    </div>

    <!-- Replace the jQuery slim version with the full version -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" 
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" 
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/js/bootstrap.min.js" 
        integrity="sha384-XEerZL0cuoUbHE4nZReLT7nx9gQrQreJekYhJD9WNWhH8nEW+0c5qq7aIo2Wl30J" 
        crossorigin="anonymous"></script>

    <script type="text/javascript">
        window.addEventListener('beforeunload', function (e) {
            if (!document.getElementById('submitBtn').disabled) {
                // Cancel the event
                e.preventDefault();
                // Chrome requires returnValue to be set
                e.returnValue = '';
            }
        });

        function confirmSubmission() {
            return confirm('Are you sure you want to submit your results?');
        }

        function preventRepeatedSubmission() {
            document.getElementById('submitBtn').disabled = true;
            setTimeout("submitBtn.disabled=false;", 50);
            return true;
        };
        function addTimestamp() {
            // Get current timestamp in milliseconds
            const currentTimestamp = Date.now();
            const dateObject = new Date(currentTimestamp);
            const readableTimestamp = dateObject.toISOString().replace("T", " ").substring(0, 19);

            // Set the value of the hidden input field to the current timestamp
            document.getElementById("timestamp").value = readableTimestamp;
            return true;
        }
        function checkAllRadioGroupsChecked() {
            const radioGroups = document.querySelectorAll('.form-check-input[type="radio"]');
            const radioNames = new Set();
            radioGroups.forEach(input => radioNames.add(input.name));
            for (let name of radioNames) {
                const group = document.querySelectorAll(`input[name="${name}"]`);
                const isChecked = Array.from(group).some(input => input.checked);
                if (!isChecked) {
                    alert('Please ensure you have voted for all required questions by selecting an option in each group. You can use `Previous Question` to check your answers.');
                    return false;
                }
            }
            return true;
        }
    </script>

    
    <script>

        // Call this function when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            setupAudioSideNavigation();
        });

        let currentQuestionIndex = 0;
        const questions = document.querySelectorAll('.question');
        const nextPageButton = document.getElementById('nextPageButton');

        function showQuestion(index) {
            questions.forEach((question, i) => {
                question.style.display = i === index ? 'block' : 'none';
            });
        }

        const audios = document.querySelectorAll('audio');
        audios.forEach((function(audioElement) {
            audioElement.dataset.played = "false"; // Initial state

            audioElement.addEventListener('ended', function() {
                console.log('Audio has played:', this.src);
                this.dataset.played = "true"; // Mark as played
            });
        }));

        nextPageButton.addEventListener('click', function() {
            const currentQuestion = document.querySelector('.question[style*="display: block"]');
            
            let allValidAudio = true;
            let allValidQuestion = true;
            let invalidAudios = [];
            let invalidQuestions = [];

            // Check if all audios have been played
            const currentaudio = currentQuestion.querySelectorAll('audio');
            currentaudio.forEach(audioElement => {
                if (audioElement.dataset.played === "false") {
                    allValidAudio = false;
                    const audioLabel = audioElement.closest(".audio") ? 
                        audioElement.closest(".audio").querySelector('.audio-side').innerText :
                        audioElement.id;
                    invalidAudios.push(audioLabel + ' (Audio not played to the end)');
                }
            });

            // check all questions have been answered
            const radioGroups = currentQuestion.querySelectorAll('.form-check-input[type="radio"]');
            const radioNames = new Set();
            radioGroups.forEach(input => radioNames.add(input.name));
            radioNames.forEach(name => {
                const group = currentQuestion.querySelectorAll(`input[name="${name}"]`);
                const isChecked = Array.from(group).some(input => input.checked);
                if (!isChecked) {
                    allValidQuestion = false;
                    const questionLabel = group[0].closest('.form-group').querySelector('label').innerText;
                    invalidQuestions.push(questionLabel);
                }
            });
            

            if (!allValidAudio) {
                alert('Please listen to the following audio before voting (for both sides). \n => ' + invalidAudios.join('\n => '));
            } else if (!allValidQuestion) {
                alert('Please vote for the following questions (for both sides). You need to choose one most suitable option. \n => ' + invalidQuestions.join('\n => '));
            } else {
                if (currentQuestionIndex < questions.length - 1) {
                    currentQuestionIndex++;
                    showQuestion(currentQuestionIndex);
                    document.getElementById('form_container').scrollIntoView({ behavior: 'smooth' });
                } else {
                    alert('You have completed all questions. Remember to click "Submit Results" to upload the results. If success, it will show "Thanks" after submission.');
                }
            }
        });

        previousPageButton.addEventListener('click', function() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex);
            } else {
                alert('This is the first question.');
            }
        });

        // Initialize the first question
        showQuestion(currentQuestionIndex);

        // Add a function to handle navigation between audio sides
        function setupAudioSideNavigation() {            
            // Add "Other Side" button after each question's navigation
            questions.forEach(question => {
                const audioContainers = question.querySelectorAll('.side-container');
                if (audioContainers.length > 1) {                
                    // Initially show only the first audio
                    audioContainers.forEach((container, index) => {
                        if (index === 0) {
                            container.style.display = 'block';
                        } else {
                            container.style.display = 'none';
                        }
                    });
                    
                    // Set up the click handler for the Other Side button
                    let currentAudioIndex = 0;
                    const otherSideBtn = question.querySelectorAll('.button-next-side');
                    otherSideBtn.forEach(button => {
                        button.addEventListener('click', function() {
                            currentAudioIndex = (currentAudioIndex + 1) % audioContainers.length;
                            
                            // Show the next audio
                            audioContainers[currentAudioIndex].style.display = 'block';
                            button.style.display = 'none';
                        });
                    });
                }
            });
        }

    </script>

</body>

</html>